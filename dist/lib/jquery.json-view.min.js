/**
 * json-view - Collapsible JSON Viewer
 * @version v1.0.0
 * @link http://github.com/Nexenta
 * @license MIT
 */
!function(e){"use strict";var n=function(n){var p=e("<span />",{"class":"collapser",on:{click:function(){var n=e(this);n.toggleClass("collapsed");var p=n.parent().children(".block"),a=p.children("ul");n.hasClass("collapsed")?(a.hide(),p.children(".dots, .comments").show()):(a.show(),p.children(".dots, .comments").hide())}}});return n&&p.addClass("collapsed"),p},p=function(p,a){var t=e.extend({},{nl2br:!0},a),r=function(e){return e?e.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},s=function(n,p){return e("<span />",{"class":p,html:r(n)})},l=function(p,a){switch(e.type(p)){case"object":a||(a=0);var c=e("<span />",{"class":"block"}),d=Object.keys(p).length;if(!d)return c.append(s("{","b")).append(" ").append(s("}","b"));c.append(s("{","b"));var i=e("<ul />",{"class":"obj collapsible level"+a});return e.each(p,function(p,t){d--;var r=e("<li />").append(s('"',"q")).append(p).append(s('"',"q")).append(": ").append(l(t,a+1));-1===["object","array"].indexOf(e.type(t))||e.isEmptyObject(t)||r.prepend(n()),d>0&&r.append(","),i.append(r)}),c.append(i),c.append(s("...","dots")),c.append(s("}","b")),c.append(1===Object.keys(p).length?s("// 1 item","comments"):s("// "+Object.keys(p).length+" items","comments")),c;case"array":a||(a=0);var d=p.length,c=e("<span />",{"class":"block"});if(!d)return c.append(s("[","b")).append(" ").append(s("]","b"));c.append(s("[","b"));var i=e("<ul />",{"class":"obj collapsible level"+a});return e.each(p,function(p,t){d--;var r=e("<li />").append(l(t,a+1));-1===["object","array"].indexOf(e.type(t))||e.isEmptyObject(t)||r.prepend(n()),d>0&&r.append(","),i.append(r)}),c.append(i),c.append(s("...","dots")),c.append(s("]","b")),c.append(1===p.length?s("// 1 item","comments"):s("// "+p.length+" items","comments")),c;case"string":if(p=r(p),/^(http|https|file):\/\/[^\s]+$/i.test(p))return e("<span />").append(s('"',"q")).append(e("<a />",{href:p,text:p})).append(s('"',"q"));if(t.nl2br){var o=/\n/g;o.test(p)&&(p=(p+"").replace(o,"<br />"))}var u=e("<span />",{"class":"str"}).html(p);return e("<span />").append(s('"',"q")).append(u).append(s('"',"q"));case"number":return s(p,"num");case"undefined":return s("undefined","undef");case"null":return s("null","null")}};return l(p)};return e.fn.jsonView=function(n,a){var t=e(this),a=e.extend({},{nl2br:!0},a);return"[object String]"===Object.prototype.toString.call(n)&&(n=JSON.parse(n)),t.append(e("<div />",{"class":"json-view"}).append(p(n,a))),t}}(jQuery);